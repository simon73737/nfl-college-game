<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>NFL College Guessing Game</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* --- styling unchanged --- */
    * { box-sizing: border-box; }
    body { font-family: Arial, Helvetica, sans-serif; margin: 0; padding: 1rem; max-width: 800px; margin: 0 auto; background-color: #f5f5f5; }
    h1 { text-align: center; color: #333; margin-bottom: 2rem; }
    .question { margin-bottom: 1.5rem; padding: 1.5rem; border: 1px solid #ddd; border-radius: 12px; background-color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .player-info { margin-bottom: 1rem; font-size: 1.1rem; }
    .player-name { font-weight: bold; color: #333; }
    .player-team { color: #666; margin-left: 0.5rem; }
    .input-container { position: relative; margin-bottom: 1rem; }
    .college-input { width: 100%; padding: 0.75rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; transition: border-color 0.2s; }
    .college-input:focus { outline: none; border-color: #4CAF50; }
    .college-input:disabled { background-color: #f5f5f5; cursor: not-allowed; }
    .dropdown { position: absolute; top: 100%; left: 0; right: 0; background: white; border: 2px solid #ddd; border-top: none; border-radius: 0 0 8px 8px; max-height: 200px; overflow-y: auto; z-index: 1000; display: none; }
    .dropdown-item { padding: 0.75rem; cursor: pointer; border-bottom: 1px solid #eee; transition: background-color 0.15s; }
    .dropdown-item:hover, .dropdown-item.highlighted { background-color: #f0f8ff; }
    .dropdown-item:last-child { border-bottom: none; }
    .button-row { display: flex; gap: 0.5rem; flex-wrap: wrap; }
    button { padding: 0.75rem 1.25rem; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.2s; min-height: 44px; }
    .submit-btn { background-color: #4CAF50; color: white; flex: 1; min-width: 120px; }
    .submit-btn:hover:not(:disabled) { background-color: #45a049; }
    .submit-btn:disabled { background-color: #ccc; cursor: not-allowed; }
    .reveal-btn { background-color: #ff9800; color: white; flex: 1; min-width: 120px; }
    .reveal-btn:hover:not(:disabled) { background-color: #e68900; }
    .reveal-btn:disabled { background-color: #ccc; cursor: not-allowed; }
    .correct { color: #4CAF50; font-weight: bold; }
    .wrong { color: #f44336; font-weight: bold; }
    .revealed { color: #ff9800; font-weight: bold; }
    #controls { text-align: center; margin-bottom: 2rem; padding: 1rem; background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    #controls button { background-color: #2196F3; color: white; margin: 0.25rem; min-width: 150px; }
    #controls button:hover { background-color: #1976D2; }
    .result { margin-top: 1rem; padding: 0.75rem; border-radius: 8px; font-size: 1rem; }
    .result.correct { background-color: #e8f5e8; border: 1px solid #4CAF50; }
    .result.wrong { background-color: #ffeaea; border: 1px solid #f44336; }
    .result.revealed { background-color: #fff3e0; border: 1px solid #ff9800; }
    #score { font-size: 1.2rem; font-weight: bold; color: #333; margin-left: 1rem; }
    .loading { text-align: center; padding: 2rem; color: #666; background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    @media (max-width: 600px) {
      body { padding: 0.5rem; }
      h1 { font-size: 1.5rem; margin-bottom: 1rem; }
      .question { padding: 1rem; margin-bottom: 1rem; }
      .button-row { flex-direction: column; }
      .submit-btn, .reveal-btn { flex: none; width: 100%; }
      #controls button { min-width: 120px; margin: 0.25rem; }
      .dropdown { max-height: 150px; }
    }
  </style>
</head>
<body>
  <h1>NFL College Guessing Game</h1>

  <div id="controls">
    <div style="margin-bottom: 1rem;">
      <button id="modeStandard" onclick="gameLogic.setMode('standard')">Standard Mode</button>
      <button id="modeHard" onclick="gameLogic.setMode('hard')">Hard Mode</button>
    </div>
    
    <button id="startBtn" onclick="gameLogic.startGame()">Get Players</button>
    <button id="playAgainBtn" style="display:none" onclick="gameLogic.startGame()">Play Again</button>
    <span id="score"></span>
  </div>

  <div id="game" class="loading">Click "Get Players" to start the game!</div>

  <script src="game-logic.js"></script>
  <script>
    const UI = {
      elements: {
        game: document.getElementById('game'),
        startBtn: document.getElementById('startBtn'),
        playAgainBtn: document.getElementById('playAgainBtn'),
        score: document.getElementById('score')
      },

      showLoading() {
        this.elements.game.textContent = 'Loading players...';
        this.elements.game.className = 'loading';
      },

      showError(message) {
        this.elements.game.textContent = `Error: ${message}`;
        this.elements.game.className = 'loading';
      },

      updateScore(current, total) {
        this.elements.score.textContent = `Score: ${current}/${total}`;
      },

      showGameButtons() {
        this.elements.startBtn.style.display = 'none';
        this.elements.playAgainBtn.style.display = 'inline-block';
      },

      createGameContainer() {
        this.elements.game.innerHTML = '';
        this.elements.game.className = '';
      },

      createQuestionElement(player, index) {
        const div = document.createElement('div');
        div.className = 'question';
        div.innerHTML = `
          <div class="player-info">
            <span class="player-name">${player.player_name}</span>
            <span class="player-team">(${player.team})</span>
          </div>
          <div class="input-container">
            <input type="text" class="college-input" placeholder="Enter college name..." data-player-index="${index}" />
            <div class="dropdown" data-player-index="${index}"></div>
          </div>
          <div class="button-row">
            <button class="submit-btn" data-player-index="${index}">Submit</button>
            <button class="reveal-btn" data-player-index="${index}">Reveal Answer</button>
          </div>
          <div class="result"></div>
        `;
        this.setupQuestionEvents(div, index);
        return div;
      },

      setupQuestionEvents(questionDiv, index) {
        const input = questionDiv.querySelector('.college-input');
        const dropdown = questionDiv.querySelector('.dropdown');
        const submitBtn = questionDiv.querySelector('.submit-btn');
        const revealBtn = questionDiv.querySelector('.reveal-btn');

        input.addEventListener('input', e => this.handleInputChange(e, dropdown));
        input.addEventListener('keydown', e => this.handleInputKeydown(e, dropdown));
        input.addEventListener('blur', () => setTimeout(() => this.hideDropdown(dropdown), 150));
        input.addEventListener('focus', e => this.handleInputChange(e, dropdown));

        submitBtn.addEventListener('click', () => gameLogic.submitAnswer(index));
        revealBtn.addEventListener('click', () => gameLogic.revealAnswer(index));

        input.addEventListener('keypress', e => {
          if (e.key === 'Enter' && dropdown.style.display === 'none') {
            gameLogic.submitAnswer(index);
          }
        });
      },

      handleInputChange(event, dropdown) {
        const query = event.target.value.toLowerCase().trim();
        if (!query) {
          this.hideDropdown(dropdown);
          return;
        }
        const matches = gameLogic.searchColleges(query);
        this.showDropdown(dropdown, matches, event.target);
      },

      handleInputKeydown(event, dropdown) {
        if (dropdown.style.display === 'none') return;
        const items = dropdown.querySelectorAll('.dropdown-item');
        let highlighted = dropdown.querySelector('.dropdown-item.highlighted');

        switch(event.key) {
          case 'ArrowDown':
            event.preventDefault();
            if (!highlighted) items[0]?.classList.add('highlighted');
            else {
              highlighted.classList.remove('highlighted');
              (highlighted.nextElementSibling || items[0]).classList.add('highlighted');
            }
            break;

          case 'ArrowUp':
            event.preventDefault();
            if (!highlighted) items[items.length - 1]?.classList.add('highlighted');
            else {
              highlighted.classList.remove('highlighted');
              (highlighted.previousElementSibling || items[items.length - 1]).classList.add('highlighted');
            }
            break;

          case 'Enter':
            if (highlighted) {
              event.preventDefault();
              event.target.value = highlighted.textContent;
              this.hideDropdown(dropdown);
            }
            break;

          case 'Escape':
            this.hideDropdown(dropdown);
            event.target.blur();
            break;
        }
      },

      showDropdown(dropdown, colleges, input) {
        if (!colleges.length) {
          this.hideDropdown(dropdown);
          return;
        }
        dropdown.innerHTML = colleges.slice(0, 10).map(c => `<div class="dropdown-item">${c}</div>`).join('');
        dropdown.style.display = 'block';
        dropdown.querySelectorAll('.dropdown-item').forEach(item => {
          item.addEventListener('click', () => {
            input.value = item.textContent;
            this.hideDropdown(dropdown);
            input.focus();
          });
        });
      },

      hideDropdown(dropdown) {
        dropdown.style.display = 'none';
        dropdown.querySelectorAll('.dropdown-item').forEach(i => i.classList.remove('highlighted'));
      },

      showResult(questionIndex, result) {
        const q = document.querySelectorAll('.question')[questionIndex];
        const resultEl = q.querySelector('.result');
        const input = q.querySelector('.college-input');
        const submitBtn = q.querySelector('.submit-btn');
        const revealBtn = q.querySelector('.reveal-btn');

        resultEl.textContent = result.message;
        resultEl.className = `result ${result.type}`;
        input.disabled = true;
        submitBtn.disabled = true;
        revealBtn.disabled = true;

        this.hideDropdown(q.querySelector('.dropdown'));
      },

      getPlayerInput(index) {
        return document.querySelectorAll('.question')[index].querySelector('.college-input').value.trim();
      }
    };

    window.addEventListener('DOMContentLoaded', () => {
      gameLogic.initialize(UI);
    });
  </script>
</body>
</html>
